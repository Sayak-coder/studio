/**
 * TEMPORARY: Open rules for development while Firebase Auth is being configured.
 * TODO: Re-enable strict rules once Identity Toolkit API is properly set up.
 */
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check if a user is signed in.
    function isSignedIn() {
      return request.auth != null;
    }

    // Helper function to check if the requesting user is the owner of the document.
    function isOwner(userId) {
      return isSignedIn() && request.auth.uid == userId;
    }
    
    // Rules for the 'users' collection - open for now
    match /users/{userId} {
      allow read, write: if true;
    }
    
    // Rules for 'accessCodes' collection - read only
    match /accessCodes/{codeId} {
        allow read: if true;
        allow write: if false;
    }

    // Rules for academic 'content' collection - open read/write
    match /content/{contentId} {
      allow read, write: if true;
    }
  }
}
