{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the EduBot Central application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The display name of the user."
        },
        "role": {
          "type": "string",
          "description": "The role of the user (Student, Class Representative, Senior, admin)."
        }
      },
      "required": [
        "id",
        "email",
        "role",
        "name"
      ]
    },
    "Content": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Content",
      "type": "object",
      "description": "Represents a piece of academic content like a note, PYQ, or important question.",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the content."
        },
        "subject": {
          "type": "string",
          "description": "The academic subject this content belongs to."
        },
        "type": {
          "type": "string",
          "description": "The type of content.",
          "enum": ["Class Notes", "PYQ", "Important Question"]
        },
        "content": {
          "type": "string",
          "description": "The main body of the academic content, can contain Markdown."
        },
        "authorId": {
          "type": "string",
          "description": "The UID of the user who created this content."
        },
        "authorName": {
          "type": "string",
          "description": "The display name of the user who created this content."
        },
        "fileUrl": {
          "type": "string",
          "description": "The URL of the uploaded image or PDF file."
        },
        "fileType": {
          "type": "string",
          "description": "The MIME type of the uploaded file (e.g., 'image/jpeg', 'application/pdf')."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the content was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the content was last updated."
        }
      },
      "required": [
        "title",
        "subject",
        "type",
        "content",
        "authorId",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Uses path-based ownership; only the authenticated user can access their own profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/content/{contentId}",
        "definition": {
          "entityName": "Content",
          "schema": {
            "$ref": "#/backend/entities/Content"
          },
          "description": "Stores academic content created by users. Write access is controlled by ownership.",
          "params": [
            {
              "name": "contentId",
              "description": "The unique identifier for the content document."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure prioritizes security and scalability. User data is isolated under `/users/{userId}` with strict ownership rules. The top-level `/content` collection stores all academic materials. Security rules for `/content` will ensure that while any authenticated user can create content, only the original author (authorId) can update or delete their own contributions. This prevents one user from modifying another's work and provides a clear audit trail."
  }
}
